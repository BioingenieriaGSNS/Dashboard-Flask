{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block extra_css %}
<style>
/* Responsive para mÃ³viles */
@media (max-width: 768px) {
    /* Ajustar mÃ©tricas en mÃ³vil */
    .metrics {
        grid-template-columns: 1fr 1fr !important;
        gap: 0.75rem !important;
    }
    
    .metric-card {
        padding: 1rem !important;
    }
    
    .metric-label {
        font-size: 0.75rem !important;
    }
    
    .metric-value {
        font-size: 1.8rem !important;
    }
    
    /* Tablas en una sola columna en mÃ³vil */
    .dashboard-tables {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    /* Ajustar tÃ­tulo */
    .dashboard-title {
        font-size: 1.3rem !important;
        margin-bottom: 1rem !important;
    }
    
    /* SubtÃ­tulos mÃ¡s pequeÃ±os */
    .dashboard-subtitle {
        font-size: 1rem !important;
    }
    
    /* Botones de acceso rÃ¡pido en columna */
    .quick-access-buttons {
        flex-direction: column !important;
    }
    
    .quick-access-buttons .btn {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock %}

{% block content %}
<h2 class="dashboard-title" style="margin-bottom: 1.5rem; color: #1e4d7b;">ğŸ“ˆ Resumen General</h2>

<div class="metrics">
    <div class="metric-card">
        <div class="metric-label">Pendientes</div>
        <div class="metric-value">{{ pendientes }}</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">Finalizadas</div>
        <div class="metric-value">{{ finalizados }}</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">En Curso</div>
        <div class="metric-value">{{ en_curso }}</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-label">A Presupuestar</div>
        <div class="metric-value">{{ a_presupuestar }}</div>
    </div>
</div>

<div class="dashboard-tables" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
    <div>
        <h3 class="dashboard-subtitle" style="margin-bottom: 1rem; color: #1e4d7b;">ğŸ“Š Estados de Solicitudes</h3>
        <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
            <table>
                <thead>
                    <tr>
                        <th>Estado</th>
                        <th>Cantidad</th>
                    </tr>
                </thead>
                <tbody>
                    {% for estado in estados %}
                    <tr>
                        <td>{{ estado.estado }}</td>
                        <td style="font-weight: 600;">{{ estado.cantidad }}</td>
                    </tr>
                    {% endfor %}
                    <tr style="background: #e3f2fd; border-top: 2px solid #1e4d7b;">
                        <td style="font-weight: 700; color: #1e4d7b;">TOTAL EQUIPOS</td>
                        <td style="font-weight: 700; color: #1e4d7b; font-size: 1.1rem;">{{ total_equipos }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div>
        <h3 class="dashboard-subtitle" style="margin-bottom: 1rem; color: #1e4d7b;">ğŸ“ CategorÃ­as de Equipos</h3>
        <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
            <table>
                <thead>
                    <tr>
                        <th>CategorÃ­a</th>
                        <th>Cantidad</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cat in categorias %}
                    <tr>
                        <td>{{ cat.categoria_nombre }}</td>
                        <td style="font-weight: 600;">{{ cat.cantidad }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<div style="margin-top: 2rem; padding: 1.5rem; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
    <h3 class="dashboard-subtitle" style="margin-bottom: 1rem; color: #1e4d7b;">ğŸš€ Accesos RÃ¡pidos</h3>
    <div class="quick-access-buttons" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="{{ url_for('solicitudes') }}" class="btn btn-primary">ğŸ“‹ Ver Solicitudes</a>
        <a href="{{ url_for('equipos') }}" class="btn btn-primary">ğŸ–¥ï¸ Ver Equipos</a>
        <a href="{{ url_for('archivos') }}" class="btn btn-primary">ğŸ“ Ver Archivos</a>
    </div>
</div>
{% endblock %}